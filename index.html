<html>
<head>
  <link rel="stylesheet" href="style.css">
</head>

<body class="not-loaded">
  <div class="night"></div>
  <div class="flowers">
    <div id="flowers-container"></div>

    <div id="growing-grass-container"></div>

    <div id="grow-ans-container"></div>

    <div id="long-g-container"></div>
  </div>

  <script>
    function createElementWithClasses(tag, classNames) {
      const element = document.createElement(tag);
      element.className = classNames;
      return element;
    }

    function createFlower(flowerClass, leafCount, lightCount, lineLeafCount) {
      const flower = createElementWithClasses('div', `flower ${flowerClass}`);
      const flowerLeafs = createElementWithClasses('div', `flower__leafs ${flowerClass}--leafs`);
      
      for (let i = 1; i <= leafCount; i++) {
        flowerLeafs.appendChild(createElementWithClasses('div', `flower__leaf flower__leaf--${i}`));
      }
      
      flowerLeafs.appendChild(createElementWithClasses('div', 'flower__white-circle'));

      for (let i = 1; i <= lightCount; i++) {
        flowerLeafs.appendChild(createElementWithClasses('div', `flower__light flower__light--${i}`));
      }

      flower.appendChild(flowerLeafs);

      const flowerLine = createElementWithClasses('div', 'flower__line');
      for (let i = 1; i <= lineLeafCount; i++) {
        flowerLine.appendChild(createElementWithClasses('div', `flower__line__leaf flower__line__leaf--${i}`));
      }
      flower.appendChild(flowerLine);

      return flower;
    }

    const flowersContainer = document.getElementById('flowers-container');
    flowersContainer.appendChild(createFlower('flower--1', 4, 8, 6));
    flowersContainer.appendChild(createFlower('flower--2', 4, 8, 4));
    flowersContainer.appendChild(createFlower('flower--3', 4, 8, 4));
    flowersContainer.appendChild(createFlower('flower--4', 4, 8, 4));

    function createGrass(grassClass) {
      const grass = createElementWithClasses('div', `flower__grass ${grassClass}`);
      grass.appendChild(createElementWithClasses('div', 'flower__grass--top'));
      grass.appendChild(createElementWithClasses('div', 'flower__grass--bottom'));

      for (let i = 1; i <= 8; i++) {
        grass.appendChild(createElementWithClasses('div', `flower__grass__leaf flower__grass__leaf--${i}`));
      }

      grass.appendChild(createElementWithClasses('div', 'flower__grass__overlay'));
      return grass;
    }

    const growingGrassContainer = document.getElementById('growing-grass-container');
    growingGrassContainer.appendChild(createGrass('flower__grass--1'));
    growingGrassContainer.appendChild(createGrass('flower__grass--2'));

    function createGrowAns(d, childClass, childCount) {
      const growAns = createElementWithClasses('div', 'grow-ans');
      growAns.style.setProperty('--d', `${d}s`);
      
      for (let i = 1; i <= childCount; i++) {
        growAns.appendChild(createElementWithClasses('div', `${childClass} ${childClass}--${i}`));
      }

      return growAns;
    }

    const growAnsContainer = document.getElementById('grow-ans-container');
    growAnsContainer.appendChild(createGrowAns(1.2, 'flower__g-long', 2));
    growAnsContainer.appendChild(createGrowAns(2.4, 'flower__g-right', 1));
    growAnsContainer.appendChild(createGrowAns(2.8, 'flower__g-front__leaf-wrapper', 8));
    growAnsContainer.appendChild(createGrowAns(3.2, 'flower__g-fr__leaf', 8));

    function createLongG(grassClass, delayArray) {
      const longG = createElementWithClasses('div', `long-g ${grassClass}`);
      
      delayArray.forEach((d, index) => {
        const growAns = createElementWithClasses('div', 'grow-ans');
        growAns.style.setProperty('--d', `${d}s`);
        growAns.appendChild(createElementWithClasses('div', `leaf leaf--${index}`));
        longG.appendChild(growAns);
      });

      return longG;
    }

    const longGContainer = document.getElementById('long-g-container');
    longGContainer.appendChild(createLongG('long-g--0', [3, 2.2, 3.4, 3.6]));
    longGContainer.appendChild(createLongG('long-g--1', [3.6, 3.8, 4, 4.2]));
    longGContainer.appendChild(createLongG('long-g--2', [4, 4.2, 4.4, 4.6]));
    longGContainer.appendChild(createLongG('long-g--3', [4, 4.2, 3, 3.6]));
    longGContainer.appendChild(createLongG('long-g--4', [4, 4.2, 3, 3.6]));
    longGContainer.appendChild(createLongG('long-g--5', [4, 4.2, 3, 3.6]));
    longGContainer.appendChild(createLongG('long-g--6', [4.2, 4.4, 4.6, 4.8]));
    longGContainer.appendChild(createLongG('long-g--7', [3, 3.2, 3.5, 3.6]));

    onload = () => {
      const c = setTimeout(() => {
        document.body.classList.remove("not-loaded");
        clearTimeout(c);
      }, 1000);
    };
  </script>
</body>

</html>
